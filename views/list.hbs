<div class="bg-white p-7 rounded-lg shadow-md text-center">
    <h1 class="text-3xl font-semibold text-[#A78BFA] mb-6">Danh sách sinh viên</h1>
    <div class="overflow-x-auto">
        <table class="table-auto w-full border-collapse bg-white rounded-lg shadow-lg overflow-hidden text-center">
            <thead class="bg-gray-300 text-black">
                <tr>
                    <th class="px-3 py-2 text-[15px] font-medium">MSSV</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Họ và tên</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Ngày sinh</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Giới tính</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Khoa</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Khóa</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Chương trình</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Địa chỉ</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Email</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Số điện thoại liên hệ</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Tình trạng sinh viên</th>
                    <th class="px-3 py-2 text-[15px] font-medium">Hành động</th>
                </tr>
            </thead>
            <tbody id="student-table-body">
                <!-- Dữ liệu sinh viên sẽ được tải vào đây -->
            </tbody>
        </table>
    </div>
</div>

<script>
    const khoaOptions = ["Khoa Luật", "Khoa Tiếng Anh thương mại", "Khoa Tiếng Nhật", "Khoa Tiếng Pháp"];
    const tinhTrangOptions = ["Đang học", "Đã tốt nghiệp", "Đã thôi học", "Tạm dừng học"];
    
    const labels = {
        mssv: "Mã số sinh viên",
        họVàTên: "Họ và Tên",
        ngàySinh: "Ngày sinh",
        giớiTính: "Giới tính",
        khoa: "Khoa",
        khóa: "Khóa",
        chươngTrình: "Chương trình",
        địaChỉ: "Địa chỉ",
        email: "Email",
        sốĐiệnThoại: "Số điện thoại",
        tìnhTrạng: "Tình trạng sinh viên"
    };

    function loadStudents() {
        const students = JSON.parse(localStorage.getItem("students")) || [];
        const tableBody = document.getElementById("student-table-body");
        tableBody.innerHTML = "";

        if (students.length === 0) {
            tableBody.innerHTML = `<tr><td colspan="12" class="text-center py-4">Không có sinh viên nào!</td></tr>`;
            return;
        }

        students.forEach((student, index) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td class="text-[13px] border px-3 py-2 text-center">${student.mssv || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.họVàTên || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.ngàySinh || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.giớiTính || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.khoa || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.khóa || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.chươngTrình || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.địaChỉ || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.email || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.sốĐiệnThoại || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">${student.tìnhTrạng || "N/A"}</td>
                <td class="text-[13px] border px-3 py-2 text-center">
                    <button onclick="editStudent(${index})" class="bg-[#04B2D9] text-white px-2 py-1 rounded">Sửa</button>
                    <button onclick="deleteStudent(${index})" class="bg-[#FEA6B6] text-white px-2 py-1 rounded">Xóa</button>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }
    function deleteStudent(index) {
        let students = JSON.parse(localStorage.getItem("students")) || [];
        students.splice(index, 1);
        localStorage.setItem("students", JSON.stringify(students));
        loadStudents();
    }
    function editStudent(index) {
        let students = JSON.parse(localStorage.getItem("students")) || [];
        let student = students[index];
        
        Object.keys(student).forEach(key => {
            if (key === "khoa") {
                student[key] = promptSelect("Chọn khoa mới:", khoaOptions, student[key]);
            } else if (key === "tìnhTrạng") {
                student[key] = promptSelect("Chọn tình trạng mới:", tinhTrangOptions, student[key]);
            } else {
                let newValue = prompt(`Nhập ${labels[key]} mới:`, student[key]);
                if (newValue !== null) student[key] = newValue;
            }
        });
        
        students[index] = student;
        localStorage.setItem("students", JSON.stringify(students));
        loadStudents();
    }

    function promptSelect(message, options, currentValue) {
        let optionString = options.map((opt, i) => `${i + 1}. ${opt}`).join("\n");
        let selectedIndex = prompt(`${message}\n${optionString}`, options.indexOf(currentValue) + 1);
        return options[selectedIndex - 1] || currentValue;
    }

    document.addEventListener("DOMContentLoaded", loadStudents);
</script>